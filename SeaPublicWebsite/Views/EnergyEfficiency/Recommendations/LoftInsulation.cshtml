@using GovUkDesignSystem
@using GovUkDesignSystem.GovUkDesignSystemComponents
@using SeaPublicWebsite.Helpers
@using SeaPublicWebsite.Models.EnergyEfficiency.QuestionOptions
@model SeaPublicWebsite.Models.EnergyEfficiency.RecommendationViewModel;

@{
    ViewBag.Title = "Recommendation " + (Model.GetCurrentIndex() + 1) + " of " + Model.UserDataModel.UserRecommendations.Count;
}

@section BeforeMain {
    @Html.GovUkBackLink(new BackLinkViewModel
    {
        Text = "Back",
        Href = @Url.Action("YourRecommendations_Get", "EnergyEfficiency", new {reference = Model}),
        
        // Note: some of the "Back" links in this journey can't use the default browser behaviour
        //  so we should control all of them explicitly
        OverrideWithJavascript = false
    })
}

<div class="govuk-panel govuk-panel--confirmation sea-recommendations-panel">
    <div class="govuk-grid-row">
        <div class="govuk-grid-column-two-thirds">
            <span class="govuk-caption-l">Your goal</span>
            <h1 class="govuk-panel__title">
                To reduce my energy bills
            </h1>
            <a href="#" class="govuk-link govuk-link--inverse">Change my answers</a>
        </div>
        <div class="govuk-grid-column-one-third">
            <p class="govuk-body-l sea-reference">Your reference <strong>@Model.UserDataModel.Reference</strong></p>
        </div>
    </div>
</div>

<div class="govuk-grid-row">
    <div class="govuk-grid-column-two-thirds">
        <form action="@Url.Action("Recommendation_Post", "EnergyEfficiency", new {id = (int)Model.UserRecommendation.Key, reference = Model.UserDataModel.Reference})" method="post" novalidate>

        @Html.HiddenFor(m => m.UserDataModel.Reference)

        <span class="govuk-caption-l">
            Recommendation @(Model.GetCurrentIndex() + 1) of @Model.UserDataModel.UserRecommendations.Count 
        </span>
        <h1 class="govuk-heading-l">Add more loft insulation</h1>

        <p class="govuk-body">
            It looks like you have some insulation in your loft but it’s less
            than the recommended amount. It could be worthwhile adding some more
            to bring it up to the recommended thickness of 300mm, or 12 inches.
        </p>
        <p class="govuk-body">
            Adding extra insulation can help trap the heat inside your property so your
            heating doesn’t need to be on as much.
        </p>

        <div class="govuk-inset-text">
            If some of your loft is boarded so that you can store things up there
            you will either need to raise this boarding up and insulate underneath
            it, or leave that part of the loft with thinner insulation.
        </div>

        <p class="govuk-body govuk-!-margin-bottom-7">
            You can find more information on loft insulation on the
            <a href="https://energysavingtrust.org.uk/" class="govuk-link">Energy Saving Trust website.</a>
        </p>

        <h2 class="govuk-heading-m">Who this improvement is suitable for</h2>
        <p class="govuk-body">You should consider this improvement for your property if:</p>
        <ul class="govuk-list govuk-list--bullet govuk-!-margin-bottom-7">
            <li>
                You have a pitched (sloping) roof with an unheated loft space that someone could easily get into.
            </li>
            <li>
                Your loft has less than the recommended amount of insulation. This is 300mm or 12 inches thick.
            </li>
        </ul>

        <h2 class="govuk-heading-m ">What you could save</h2>
        <div class="govuk-grid-row govuk-!-margin-left-0 govuk-!-margin-bottom-6  govuk-!-margin-top-6">
            <div class="govuk-grid-column-one-half sea-install-costs">
                <span class="govuk-caption-m">This could cost</span>
                <h3 class="govuk-heading-l">£@Model.UserRecommendation.MinInstallCost - £@Model.UserRecommendation.MaxInstallCost</h3>
            </div>
            <div class="govuk-grid-column-one-half sea-yearly-savings">
                <span class="govuk-caption-m">This could save up to</span>
                <h3 class="govuk-heading-l">£@Model.UserRecommendation.Saving a year</h3>
            </div>
        </div>
            <dl class="govuk-summary-list  govuk-!-margin-bottom-7">
                <div class="govuk-summary-list__row">
                    <dt class="govuk-summary-list__key govuk-!-width-two-thirds">
                        Will this cause disruption during installation?
                    </dt>
                    <dd class="govuk-summary-list__value sea-recommendation-impact">
                        <strong class="govuk-tag govuk-tag--green">MINIMAL</strong>
                    </dd>
                </div>
                <div class="govuk-summary-list__row">
                    <dt class="govuk-summary-list__key govuk-!-width-two-thirds">
                        How long could this take to install?
                    </dt>
                    <dd class="govuk-summary-list__value  sea-recommendation-impact">
                        <strong class="govuk-tag govuk-tag--green">LESS THAN A DAY</strong>
                    </dd>
                </div>
            </dl>
            
            @(Html.GovUkRadiosFor(m => m.RecommendationAction,
                fieldsetOptions: new FieldsetViewModel
                {
                    Legend = new LegendViewModel
                    {
                        Html = @<text>
                                   <h1 class="govuk-fieldset__heading">
                                       What would you like to do with this recommendation?
                                   </h1>
                                </text>,
                        Classes = "govuk-fieldset__legend--l"
                    }
                }
                ))
            
            @if (Model.HasNextIndex())
            {
                <button name="action" value="goForwards" class="govuk-button" data-module="govuk-button">
                    Next recommendation @(Model.GetCurrentIndex() + 1)
                </button>
            }
            @if (Model.HasPreviousIndex())
            {
                <button name="action" value="goBackwards" class="govuk-button" data-module="govuk-button">
                    Previous recommendation @(Model.GetCurrentIndex() - 1)
                </button>
            }
        </form>
    </div>
    <div class="govuk-grid-column-one-third">
        <aside class="sea-recommendation-side-panel" role="complementary">
            <h2 class="govuk-heading-m" id="subsection-title">Keep a copy</h2>
            <p class="govuk-body-s">
                <a href=# class="govuk-link">Print or email this recommendation</a>
            </p>
            <h2 class="govuk-heading-m" id="subsection-title">Your wish list</h2>
            <p class="govuk-body-s">You haven’t saved any improvements yet.</p>
        </aside>
    </div>
</div>