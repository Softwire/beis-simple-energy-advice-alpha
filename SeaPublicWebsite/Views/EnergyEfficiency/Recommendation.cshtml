@using GovUkDesignSystem
@using GovUkDesignSystem.GovUkDesignSystemComponents
@model SeaPublicWebsite.Models.EnergyEfficiency.RecommendationViewModel;

@{
    ViewBag.Title = "Recommendation " + (Model.UserDataModel.UserRecommendations.FindIndex(r => r == Model.Recommendation.Key) + 1) + " of " + Model.UserDataModel.UserRecommendations.Count;
}

@section BeforeMain {
    @Html.GovUkBackLink(new BackLinkViewModel
    {
        Text = "Back",
        Href = @Url.Action("YourRecommendations_Get", "EnergyEfficiency", new {reference = Model}),
        
        // Note: some of the "Back" links in this journey can't use the default browser behaviour
        //  so we should control all of them explicitly
        OverrideWithJavascript = false
    })
}

<div class="govuk-panel govuk-panel--confirmation sea-recommendations-panel">
    <div class="govuk-grid-row">
        <div class="govuk-grid-column-two-thirds">
            <span class="govuk-caption-l">Your goal</span>
            <h1 class="govuk-panel__title">
                To reduce my energy bills
            </h1>
            <a href="#" class="govuk-link govuk-link--inverse">Change my answers</a>
        </div>
        <div class="govuk-grid-column-one-third">
            <p class="govuk-body-l sea-reference">Your reference <strong>YZ431XJ</strong></p>
        </div>
    </div>
</div>

<div class="govuk-grid-row">
    <div class="govuk-grid-column-two-thirds">
        <span class="govuk-caption-l">
            Recommendation @(Model.UserDataModel.UserRecommendations.FindIndex(r => r == Model.Recommendation.Key) + 1) of @Model.UserDataModel.UserRecommendations.Count
        </span>
        <h1 class="govuk-heading-l">@Model.Recommendation.Title</h1>

        @foreach (string paragraph in Model.Recommendation.Description)
        {
            <p class="govuk-body">@(paragraph)</p>
        }

        @Html.GovUkInsetText(
            new InsetTextViewModel
            {
                Text = @Model.Recommendation.Considerations
            })

        <p class="govuk-body govuk-!-margin-bottom-7">
            You can find more information on @Model.Recommendation.FurtherInfo on the
            <a href=# class="govuk-link">Energy Saving Trust website.</a>
        </p>

        @if (@Model.Recommendation.Caution != null)
        {
            <div class="govuk-warning-text govuk-!-margin-bottom-7">
                <span class="govuk-warning-text__icon  sea-warning-text__icon--long" aria-hidden="true">!</span>
                <strong class="govuk-warning-text__text">
                    <span class="govuk-warning-text__assistive">Caution</span>
                    @Model.Recommendation.Caution
                </strong>
            </div>
        }

        <h2 class="govuk-heading-m">Who this improvement is suitable for</h2>
        <p class="govuk-body">@Model.Recommendation.Suitability.IntroText</p>
        <ul class="govuk-list govuk-list--bullet govuk-!-margin-bottom-7">
            @foreach (string item in @Model.Recommendation.Suitability.SuitabilityPoints)
            {
                <li>@(item)</li>
            }
        </ul>

        <h2 class="govuk-heading-m ">What you could save</h2>
        <div class="govuk-grid-row govuk-!-margin-left-0 govuk-!-margin-bottom-6  govuk-!-margin-top-6">
            <div class="govuk-grid-column-one-half sea-install-costs">
                <span class="govuk-caption-m">This could cost</span>
                <h3 class="govuk-heading-l">£@Model.Recommendation.MinInstallCost - £@Model.Recommendation.MaxInstallCost</h3>
            </div>
            <div class="govuk-grid-column-one-half sea-yearly-savings">
                <span class="govuk-caption-m">This could save up to</span>
                <h3 class="govuk-heading-l">£@Model.Recommendation.Saving a year</h3>
            </div>
        </div>
        <dl class="govuk-summary-list  govuk-!-margin-bottom-7">
            <div class="govuk-summary-list__row">
                <dt class="govuk-summary-list__key govuk-!-width-two-thirds">
                    Will this cause disruption during installation?
                </dt>
                <dd class="govuk-summary-list__value sea-recommendation-impact">
                    <strong class="govuk-tag govuk-tag--green">@Model.Recommendation.Disruption.ToUpper()</strong>
                </dd>
            </div>
            <div class="govuk-summary-list__row">
                <dt class="govuk-summary-list__key govuk-!-width-two-thirds">
                    How long could this take to install?
                </dt>
                <dd class="govuk-summary-list__value  sea-recommendation-impact">
                    <strong class="govuk-tag govuk-tag--green">@Model.Recommendation.InstallationTime.ToUpper()</strong>
                </dd>
            </div>
        </dl>

        <h2 class="govuk-heading-m">What would you like to do with this recommendation?</h2>
        <a href="@Url.Action("NextRecommendation", "EnergyEfficiency")" role="button" draggable="false" class="govuk-button govuk-!-margin-top-2 govuk-!-margin-bottom-8 govuk-button--start" data-module="govuk-button">

            Explore recommendations
            <svg class="govuk-button__start-icon" xmlns="http://www.w3.org/2000/svg" width="17.5" height="19" viewBox="0 0 33 40" aria-hidden="true" focusable="false">
                <path fill="currentColor" d="M0 0h13l20 20-20 20H0l20-20z"/>
            </svg>
        </a>
    </div>
    <div class="govuk-grid-column-one-third">
        <aside class="sea-recommendation-side-panel" role="complementary">
            <h2 class="govuk-heading-m" id="subsection-title">Keep a copy</h2>
            <p class="govuk-body-s">
                <a href=# class="govuk-link">Print or email this recommendation</a>
            </p>
            <h2 class="govuk-heading-m" id="subsection-title">Your wish list</h2>
            <p class="govuk-body-s">You haven’t saved any improvements yet.</p>
        </aside>
    </div>
</div>