@using GovUkDesignSystem
@using GovUkDesignSystem.GovUkDesignSystemComponents
@using SeaPublicWebsite.DataModels
@model SeaPublicWebsite.Models.EnergyEfficiency.YourSavedRecommendationsViewModel;

@{
    ViewBag.Title = "Your action plan";
}


<div class="govuk-grid-row">
    <div class="govuk-grid-column-full">
        <h1 class="govuk-heading-xl govuk-!-margin-bottom-5">Your action plan</h1>
        <p class="govuk-body govuk-!-margin-bottom-6">
            If you went ahead with all the recommendations you have chosen, this is the impact it could have:
        </p>

        <div class="govuk-!-padding-left-4 sea-total-savings govuk-!-margin-bottom-6">
            <span class="govuk-caption-m">You could save up to</span>
            <h3 class="govuk-heading-l sea-total-savings-text">@Model.GetTotalSavingText()</h3>
        </div>
        <div class="govuk-grid-row govuk-!-margin-bottom-4">
            <div class="govuk-grid-column-one-half">
                <div class="govuk-!-padding-left-4 sea-total-installation-cost">
                    <span class="govuk-caption-m">Together, these improvements could cost</span>
                    <h3 class="govuk-heading-l">@Model.GetTotalInstallationCostText()</h3>
                </div>
            </div>
            <div class="govuk-grid-column-one-half">
                <div class="govuk-inset-text govuk-!-margin-0 govuk-!-padding-top-1  govuk-!-padding-bottom-1">
                    You may be able to apply for grants to help with the cost of fitting some or all of these improvements.
                    See Next Steps for details.
                </div>
            </div>
        </div>

        <details class="govuk-details govuk-!-margin-bottom-7" data-module="govuk-details">
            <summary class="govuk-details__summary">
                <span class="govuk-details__summary-text">
                    How did we calculate these figures?
                </span>
            </summary>
            <div class="govuk-details__text">
                The costs and savings you view using the services on this site are based on standards
                developed for Government as a way of understanding how houses and flats use energy,
                and how your home’s energy use could be improved. You can find out more information
                about these standards with the guidance published on the
                <a class="govuk-link" target="_blank" href="https://www.gov.uk/guidance/standard-assessment-procedure">Standard Assessment Procedure site.<span class="govuk-visually-hidden">(opens in a new window)</span></a>
            </div>
        </details>


        @if (Model.GetSavedRecommendations().Count > 0)
        {
            <table class="govuk-table govuk-!-margin-bottom-9">
                <thead class="govuk-table__head">
                <tr class="govuk-table__row">
                    <th scope="col" class="govuk-table__header"></th>
                    <th scope="col" class="govuk-table__header">Typical savings per year</th>
                    <th scope="col" class="govuk-table__header">Typical costs</th>
                    <th scope="col" class="govuk-table__header sea-saved-recommendations-table-headers"></th>
                    <th scope="col" class="govuk-table__header sea-saved-recommendations-table-headers"></th>
                </tr>
                </thead>
                <tbody class="govuk-table__body">
                @foreach (UserRecommendation recommendation in @Model.GetSavedRecommendations())
                {
                    <tr class="govuk-table__row">
                        <td class="govuk-table__cell govuk-!-padding-top-4 sea-saved-recommendations-table-headers">
                            <p class="govuk-body govuk-!-margin-bottom-1 govuk-!-font-weight-bold">
                                @(recommendation.Title)
                            </p>
                            <p class="govuk-body-s govuk-!-margin-bottom-0">
                                @(recommendation.Summary)
                            </p>
                        </td>
                        <td class="govuk-table__cell govuk-!-padding-top-4 sea-saved-recommendations-table-headers">@Model.GetSavingText(recommendation)</td>
                        <td class="govuk-table__cell govuk-!-padding-top-4 sea-saved-recommendations-table-headers">@Model.GetInstallationCostText(recommendation)</td>
                        <td class="govuk-table__cell govuk-!-padding-top-4 sea-saved-recommendations-table-headers-hide">
                            <a class="govuk-link" href=@Url.Action("Recommendation_Get", new {id = (int) recommendation.Key, reference = Model.UserDataModel.Reference})>
                                View information again
                            </a>
                        </td>
                        <td class="govuk-table__cell govuk-!-padding-top-4 sea-saved-recommendations-table-headers-hide">
                            <a href="@Url.Action("RemoveFromPlan_Get", new {id = (int) recommendation.Key, reference = Model.UserDataModel.Reference})" class="govuk-link">Discard</a>
                        </td>
                    </tr>
                    <tr class="govuk-table__row sea-saved-recommendations-secondary-row">
                        <td colspan="3" class="govuk-table__cell">
                            <a href=@Url.Action("Recommendation_Get", new {id = (int) recommendation.Key, reference = Model.UserDataModel.Reference})
                               class="govuk-link govuk-!-margin-right-3">
                                View information again
                            </a>
                            <a href="@Url.Action("RemoveFromPlan_Get", new {id = (int) recommendation.Key, reference = Model.UserDataModel.Reference})"
                               class="govuk-link">
                                Discard
                            </a>
                        </td>
                    </tr>
                }
                </tbody>
            </table>
        }

        @if (Model.GetDecideLaterRecommendations().Count > 0)
        {
            <h2 class="govuk-heading-m govuk-!-margin-bottom-6">Recommendations you wanted to decide on later</h2>

            <dl class="govuk-summary-list govuk-!-margin-bottom-7">
                @foreach (UserRecommendation recommendation in Model.GetDecideLaterRecommendations())
                {
                    <div class="govuk-summary-list__row">
                        <dt class="govuk-summary-list__key">
                            <p class="govuk-body govuk-!-margin-bottom-1 govuk-!-font-weight-bold">
                                @(recommendation.Title)
                            </p>
                            <p class="govuk-body-s govuk-!-margin-bottom-0">
                                @(recommendation.Summary)
                            </p>
                        </dt>
                        <dd class="govuk-summary-list__actions govuk-!-margin-bottom-2">
                            <div class="sea-decide-later-action-links">
                                <a href=@Url.Action("Recommendation_Get", new {id = (int) recommendation.Key, reference = Model.UserDataModel.Reference})
                                   class="govuk-link">
                                    View information again
                                </a>
                                <a href="@Url.Action("AddToPlan_Get", new {id = (int) recommendation.Key, reference = Model.UserDataModel.Reference})"
                                   class="govuk-link">
                                    Add to action plan
                                </a>
                                <a href="@Url.Action("RemoveFromPlan_Get", new {id = (int) recommendation.Key, reference = Model.UserDataModel.Reference})"
                                   class="govuk-link">
                                    Discard
                                </a>
                            </div>
                        </dd>
                    </div>
                }
            </dl>
        }
        <details class="govuk-details govuk-!-margin-bottom-7" data-module="govuk-details">
            <summary class="govuk-details__summary">
                <span class="govuk-details__summary-text">
                    Think something’s missing?
                </span>
            </summary>
            <div class="govuk-details__text">
                <p class="govuk-body">
                    Based on the answers you provided earlier, we were able to rule out some improvements that are unlikely to be suitable for your home. 
                </p>
                <p class="govuk-body">
                    If you are interested, you can 
                    <a href="javascript:void(0);" class="govuk-link">
                        view the recommendations that we decided were not suitable for your home.
                    </a>
                </p>
            </div>
        </details>
    </div>
    
    <div class="govuk-grid-column-full">
        <div class="govuk-notification-banner  sea-next-steps" role="region" aria-labelledby="govuk-notification-banner-title" data-module="govuk-notification-banner">
            <div class="govuk-notification-banner__header govuk-!-padding-top-4 govuk-!-padding-bottom-4">
                <h2 class="govuk-notification-banner__title govuk-heading-l govuk-!-font-size-27" id="govuk-notification-banner-title">
                    What you can do next
                </h2>
            </div>
            <div class="govuk-notification-banner__content">
                <div class="sea-numbered-steps">
                    <ol class="govuk-list govuk-list--number govuk-!-margin-top-6 govuk-!-margin-bottom-6">
                        <li class="sea-step">
                            <div class="content">
                                <h3 class="govuk-heading-s">Print or email your action plan</h3>
                                <p class="govuk-body-s">Keep a copy of your action plan to refer to or show to a qualified installer when you’re ready to get a quote. </p>
                                <p class="govuk-body-s govuk-!-padding-bottom-4">
                                    <a href="javascript:void(0);" class="govuk-link">Print or email your action plan</a>
                                </p>
                            </div>
                        </li>
                        <li class="sea-step">
                            <div class="content">
                                <h3 class="govuk-heading-s">Speak to qualified installers</h3>
                                <p class="govuk-body-s">We recommend speaking to qualified installers about making changes to your property.</p>
                                <p class="govuk-body-s">You can get help finding a qualified installer in your area by visiting the TrustMark website.</p>
                                <p class="govuk-body-s govuk-!-padding-bottom-4">
                                    <a class="govuk-link" href="https://www.trustmark.org.uk/">Find qualified installers</a>
                                    on the TrustMark website
                                </p>
                            </div>
                        </li>
                        <li class="sea-step">
                            <div class="content">
                                <h3 class="govuk-heading-s">Check for grants</h3>
                                <p class="govuk-body-s">There may be grants available to help towards the cost of some or all the improvements.</p>
                                <p class="govuk-body-s">
                                    <a href="javascript:void(0);" class="govuk-link">Check if you are eligible for a grant</a>
                                </p>
                            </div>
                        </li>
                    </ol>
                </div>
            </div>
        </div>
    </div>
</div>
<div class="govuk-grid-row">
    <div class="govuk-grid-column-one-half govuk-!-margin-bottom-8">
        <h2 class="govuk-heading-m">
            Find out more about saving energy
        </h2>
        <p class="govuk-body">
            You can visit the
            <a href="https://energysavingtrust.org.uk" class="govuk-link">
                Energy Saving Trust website
            </a>
            for more information on other ways to save energy and reduce your bills.
        </p>
    </div>
    <div class="govuk-grid-column-one-half">
        <h2 class="govuk-heading-m">
            Leave some feedback for this service
        </h2>
        <p class="govuk-body">
            This service is still in its early stages and under active development. 
        </p>
        <p class="govuk-body">
            Your feedback can help us to shape how the service develops so that it can best serve the needs of the public.
        </p>
        <p class="govuk-body">
            <a href="javascript:void(0);" class="govuk-link">
                Leave some feedback for this service
            </a>
        </p>
    </div>
</div>
